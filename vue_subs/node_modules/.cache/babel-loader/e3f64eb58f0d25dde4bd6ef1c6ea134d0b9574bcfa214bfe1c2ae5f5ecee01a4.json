{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { geoProjectionMutator as projectionMutator } from \"d3-geo\";\nimport { abs, asin, pi, pow, sign, sin } from \"./math.js\";\nimport { integrate } from \"./integrate.js\";\nexport function hyperellipticalRaw(alpha, k, gamma) {\n  function elliptic(f) {\n    return alpha + (1 - alpha) * pow(1 - pow(f, k), 1 / k);\n  }\n  function z(f) {\n    return integrate(elliptic, 0, f, 1e-4);\n  }\n  var G = 1 / z(1),\n    n = 1000,\n    m = (1 + 1e-8) * G,\n    approx = [];\n  for (var i = 0; i <= n; i++) approx.push(z(i / n) * m);\n  function Y(sinphi) {\n    var rmin = 0,\n      rmax = n,\n      r = n >> 1;\n    do {\n      if (approx[r] > sinphi) rmax = r;else rmin = r;\n      r = rmin + rmax >> 1;\n    } while (r > rmin);\n    var u = approx[r + 1] - approx[r];\n    if (u) u = (sinphi - approx[r + 1]) / u;\n    return (r + 1 + u) / n;\n  }\n  var ratio = 2 * Y(1) / pi * G / gamma;\n  var forward = function (lambda, phi) {\n    var y = Y(abs(sin(phi))),\n      x = elliptic(y) * lambda;\n    y /= ratio;\n    return [x, phi >= 0 ? y : -y];\n  };\n  forward.invert = function (x, y) {\n    var phi;\n    y *= ratio;\n    if (abs(y) < 1) phi = sign(y) * asin(z(abs(y)) * G);\n    return [x / elliptic(abs(y)), phi];\n  };\n  return forward;\n}\nexport default function () {\n  var alpha = 0,\n    k = 2.5,\n    gamma = 1.183136,\n    // affine = sqrt(2 * gamma / pi) = 0.8679\n    m = projectionMutator(hyperellipticalRaw),\n    p = m(alpha, k, gamma);\n  p.alpha = function (_) {\n    return arguments.length ? m(alpha = +_, k, gamma) : alpha;\n  };\n  p.k = function (_) {\n    return arguments.length ? m(alpha, k = +_, gamma) : k;\n  };\n  p.gamma = function (_) {\n    return arguments.length ? m(alpha, k, gamma = +_) : gamma;\n  };\n  return p.scale(152.63);\n}","map":{"version":3,"names":["geoProjectionMutator","projectionMutator","abs","asin","pi","pow","sign","sin","integrate","hyperellipticalRaw","alpha","k","gamma","elliptic","f","z","G","n","m","approx","i","push","Y","sinphi","rmin","rmax","r","u","ratio","forward","lambda","phi","y","x","invert","p","_","arguments","length","scale"],"sources":["/home/josh/Documents/projects/subs/vue_subs/node_modules/d3-geo-projection/src/hyperelliptical.js"],"sourcesContent":["import {geoProjectionMutator as projectionMutator} from \"d3-geo\";\nimport {abs, asin, pi, pow, sign, sin} from \"./math.js\";\nimport {integrate} from \"./integrate.js\";\n\nexport function hyperellipticalRaw(alpha, k, gamma) {\n\n  function elliptic (f) {\n    return alpha + (1 - alpha) * pow(1 - pow(f, k), 1 / k);\n  }\n\n  function z(f) {\n    return integrate(elliptic, 0, f, 1e-4);\n  }\n\n  var G = 1 / z(1),\n      n = 1000,\n      m = (1 + 1e-8) * G,\n      approx = [];\n  for (var i = 0; i <= n; i++)\n      approx.push(z(i / n) * m);\n\n  function Y(sinphi) {\n    var rmin = 0, rmax = n, r = n >> 1;\n    do {\n      if (approx[r] > sinphi) rmax = r; else rmin = r;\n      r = (rmin + rmax) >> 1;\n    } while (r > rmin);\n    var u = approx[r + 1] - approx[r];\n    if (u) u = (sinphi - approx[r + 1]) / u;\n    return (r + 1 + u) / n;\n  }\n\n  var ratio = 2 * Y(1) / pi * G / gamma;\n\n  var forward = function(lambda, phi) {\n    var y = Y(abs(sin(phi))),\n        x = elliptic(y) * lambda;\n    y /= ratio;\n    return [ x, (phi >= 0) ? y : -y ];\n  };\n\n  forward.invert = function(x, y) {\n    var phi;\n    y *= ratio;\n    if (abs(y) < 1) phi = sign(y) * asin(z(abs(y)) * G);\n    return [ x / elliptic(abs(y)), phi ];\n  };\n\n  return forward;\n}\n\nexport default function() {\n  var alpha = 0,\n      k = 2.5,\n      gamma = 1.183136, // affine = sqrt(2 * gamma / pi) = 0.8679\n      m = projectionMutator(hyperellipticalRaw),\n      p = m(alpha, k, gamma);\n\n  p.alpha = function(_) {\n    return arguments.length ? m(alpha = +_, k, gamma) : alpha;\n  };\n\n  p.k = function(_) {\n    return arguments.length ? m(alpha, k = +_, gamma) : k;\n  };\n\n  p.gamma = function(_) {\n    return arguments.length ? m(alpha, k, gamma = +_) : gamma;\n  };\n\n  return p\n      .scale(152.63);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}