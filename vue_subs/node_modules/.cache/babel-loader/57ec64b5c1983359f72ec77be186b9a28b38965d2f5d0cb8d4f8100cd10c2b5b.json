{"ast":null,"code":"import { geoProjectionMutator as projectionMutator, geoCircle } from \"d3-geo\";\nimport { abs, acos, asin, atan2, cos, degrees, epsilon, halfPi, radians, sqrt, sin } from \"./math.js\";\nexport function hammerRetroazimuthalRaw(phi0) {\n  var sinPhi0 = sin(phi0),\n    cosPhi0 = cos(phi0),\n    rotate = hammerRetroazimuthalRotation(phi0);\n  rotate.invert = hammerRetroazimuthalRotation(-phi0);\n  function forward(lambda, phi) {\n    var p = rotate(lambda, phi);\n    lambda = p[0], phi = p[1];\n    var sinPhi = sin(phi),\n      cosPhi = cos(phi),\n      cosLambda = cos(lambda),\n      z = acos(sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosLambda),\n      sinz = sin(z),\n      K = abs(sinz) > epsilon ? z / sinz : 1;\n    return [K * cosPhi0 * sin(lambda), (abs(lambda) > halfPi ? K : -K // rotate for back hemisphere\n    ) * (sinPhi0 * cosPhi - cosPhi0 * sinPhi * cosLambda)];\n  }\n  forward.invert = function (x, y) {\n    var rho = sqrt(x * x + y * y),\n      sinz = -sin(rho),\n      cosz = cos(rho),\n      a = rho * cosz,\n      b = -y * sinz,\n      c = rho * sinPhi0,\n      d = sqrt(a * a + b * b - c * c),\n      phi = atan2(a * c + b * d, b * c - a * d),\n      lambda = (rho > halfPi ? -1 : 1) * atan2(x * sinz, rho * cos(phi) * cosz + y * sin(phi) * sinz);\n    return rotate.invert(lambda, phi);\n  };\n  return forward;\n}\n\n// Latitudinal rotation by phi0.\n// Temporary hack until D3 supports arbitrary small-circle clipping origins.\nfunction hammerRetroazimuthalRotation(phi0) {\n  var sinPhi0 = sin(phi0),\n    cosPhi0 = cos(phi0);\n  return function (lambda, phi) {\n    var cosPhi = cos(phi),\n      x = cos(lambda) * cosPhi,\n      y = sin(lambda) * cosPhi,\n      z = sin(phi);\n    return [atan2(y, x * cosPhi0 - z * sinPhi0), asin(z * cosPhi0 + x * sinPhi0)];\n  };\n}\nexport default function () {\n  var phi0 = 0,\n    m = projectionMutator(hammerRetroazimuthalRaw),\n    p = m(phi0),\n    rotate_ = p.rotate,\n    stream_ = p.stream,\n    circle = geoCircle();\n  p.parallel = function (_) {\n    if (!arguments.length) return phi0 * degrees;\n    var r = p.rotate();\n    return m(phi0 = _ * radians).rotate(r);\n  };\n\n  // Temporary hack; see hammerRetroazimuthalRotation.\n  p.rotate = function (_) {\n    if (!arguments.length) return _ = rotate_.call(p), _[1] += phi0 * degrees, _;\n    rotate_.call(p, [_[0], _[1] - phi0 * degrees]);\n    circle.center([-_[0], -_[1]]);\n    return p;\n  };\n  p.stream = function (stream) {\n    stream = stream_(stream);\n    stream.sphere = function () {\n      stream.polygonStart();\n      var epsilon = 1e-2,\n        ring = circle.radius(90 - epsilon)().coordinates[0],\n        n = ring.length - 1,\n        i = -1,\n        p;\n      stream.lineStart();\n      while (++i < n) stream.point((p = ring[i])[0], p[1]);\n      stream.lineEnd();\n      ring = circle.radius(90 + epsilon)().coordinates[0];\n      n = ring.length - 1;\n      stream.lineStart();\n      while (--i >= 0) stream.point((p = ring[i])[0], p[1]);\n      stream.lineEnd();\n      stream.polygonEnd();\n    };\n    return stream;\n  };\n  return p.scale(79.4187).parallel(45).clipAngle(180 - 1e-3);\n}","map":{"version":3,"names":["geoProjectionMutator","projectionMutator","geoCircle","abs","acos","asin","atan2","cos","degrees","epsilon","halfPi","radians","sqrt","sin","hammerRetroazimuthalRaw","phi0","sinPhi0","cosPhi0","rotate","hammerRetroazimuthalRotation","invert","forward","lambda","phi","p","sinPhi","cosPhi","cosLambda","z","sinz","K","x","y","rho","cosz","a","b","c","d","m","rotate_","stream_","stream","circle","parallel","_","arguments","length","r","call","center","sphere","polygonStart","ring","radius","coordinates","n","i","lineStart","point","lineEnd","polygonEnd","scale","clipAngle"],"sources":["/home/josh/Documents/projects/subs/vue_subs/node_modules/d3-geo-projection/src/hammerRetroazimuthal.js"],"sourcesContent":["import {geoProjectionMutator as projectionMutator, geoCircle} from \"d3-geo\";\nimport {abs, acos, asin, atan2, cos, degrees, epsilon, halfPi, radians, sqrt, sin} from \"./math.js\";\n\nexport function hammerRetroazimuthalRaw(phi0) {\n  var sinPhi0 = sin(phi0),\n      cosPhi0 = cos(phi0),\n      rotate = hammerRetroazimuthalRotation(phi0);\n\n  rotate.invert = hammerRetroazimuthalRotation(-phi0);\n\n  function forward(lambda, phi) {\n    var p = rotate(lambda, phi);\n    lambda = p[0], phi = p[1];\n    var sinPhi = sin(phi),\n        cosPhi = cos(phi),\n        cosLambda = cos(lambda),\n        z = acos(sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosLambda),\n        sinz = sin(z),\n        K = abs(sinz) > epsilon ? z / sinz : 1;\n    return [\n      K * cosPhi0 * sin(lambda),\n      (abs(lambda) > halfPi ? K : -K) // rotate for back hemisphere\n        * (sinPhi0 * cosPhi - cosPhi0 * sinPhi * cosLambda)\n    ];\n  }\n\n  forward.invert = function(x, y) {\n    var rho = sqrt(x * x + y * y),\n        sinz = -sin(rho),\n        cosz = cos(rho),\n        a = rho * cosz,\n        b = -y * sinz,\n        c = rho * sinPhi0,\n        d = sqrt(a * a + b * b - c * c),\n        phi = atan2(a * c + b * d, b * c - a * d),\n        lambda = (rho > halfPi ? -1 : 1) * atan2(x * sinz, rho * cos(phi) * cosz + y * sin(phi) * sinz);\n    return rotate.invert(lambda, phi);\n  };\n\n  return forward;\n}\n\n// Latitudinal rotation by phi0.\n// Temporary hack until D3 supports arbitrary small-circle clipping origins.\nfunction hammerRetroazimuthalRotation(phi0) {\n  var sinPhi0 = sin(phi0),\n      cosPhi0 = cos(phi0);\n\n  return function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi);\n    return [\n      atan2(y, x * cosPhi0 - z * sinPhi0),\n      asin(z * cosPhi0 + x * sinPhi0)\n    ];\n  };\n}\n\nexport default function() {\n  var phi0 = 0,\n      m = projectionMutator(hammerRetroazimuthalRaw),\n      p = m(phi0),\n      rotate_ = p.rotate,\n      stream_ = p.stream,\n      circle = geoCircle();\n\n  p.parallel = function(_) {\n    if (!arguments.length) return phi0 * degrees;\n    var r = p.rotate();\n    return m(phi0 = _ * radians).rotate(r);\n  };\n\n  // Temporary hack; see hammerRetroazimuthalRotation.\n  p.rotate = function(_) {\n    if (!arguments.length) return (_ = rotate_.call(p), _[1] += phi0 * degrees, _);\n    rotate_.call(p, [_[0], _[1] - phi0 * degrees]);\n    circle.center([-_[0], -_[1]]);\n    return p;\n  };\n\n  p.stream = function(stream) {\n    stream = stream_(stream);\n    stream.sphere = function() {\n      stream.polygonStart();\n      var epsilon = 1e-2,\n          ring = circle.radius(90 - epsilon)().coordinates[0],\n          n = ring.length - 1,\n          i = -1,\n          p;\n      stream.lineStart();\n      while (++i < n) stream.point((p = ring[i])[0], p[1]);\n      stream.lineEnd();\n      ring = circle.radius(90 + epsilon)().coordinates[0];\n      n = ring.length - 1;\n      stream.lineStart();\n      while (--i >= 0) stream.point((p = ring[i])[0], p[1]);\n      stream.lineEnd();\n      stream.polygonEnd();\n    };\n    return stream;\n  };\n\n  return p\n      .scale(79.4187)\n      .parallel(45)\n      .clipAngle(180 - 1e-3);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}