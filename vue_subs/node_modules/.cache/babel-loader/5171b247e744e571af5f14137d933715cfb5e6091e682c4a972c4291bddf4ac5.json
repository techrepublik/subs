{"ast":null,"code":"// https://github.com/scijs/integrate-adaptive-simpson\n\n// This algorithm adapted from pseudocode in:\n// http://www.math.utk.edu/~ccollins/refs/Handouts/rich.pdf\nfunction adsimp(f, a, b, fa, fm, fb, V0, tol, maxdepth, depth, state) {\n  if (state.nanEncountered) {\n    return NaN;\n  }\n  var h, f1, f2, sl, sr, s2, m, V1, V2, err;\n  h = b - a;\n  f1 = f(a + h * 0.25);\n  f2 = f(b - h * 0.25);\n\n  // Simple check for NaN:\n  if (isNaN(f1)) {\n    state.nanEncountered = true;\n    return;\n  }\n\n  // Simple check for NaN:\n  if (isNaN(f2)) {\n    state.nanEncountered = true;\n    return;\n  }\n  sl = h * (fa + 4 * f1 + fm) / 12;\n  sr = h * (fm + 4 * f2 + fb) / 12;\n  s2 = sl + sr;\n  err = (s2 - V0) / 15;\n  if (depth > maxdepth) {\n    state.maxDepthCount++;\n    return s2 + err;\n  } else if (Math.abs(err) < tol) {\n    return s2 + err;\n  } else {\n    m = a + h * 0.5;\n    V1 = adsimp(f, a, m, fa, f1, fm, sl, tol * 0.5, maxdepth, depth + 1, state);\n    if (isNaN(V1)) {\n      state.nanEncountered = true;\n      return NaN;\n    }\n    V2 = adsimp(f, m, b, fm, f2, fb, sr, tol * 0.5, maxdepth, depth + 1, state);\n    if (isNaN(V2)) {\n      state.nanEncountered = true;\n      return NaN;\n    }\n    return V1 + V2;\n  }\n}\nexport function integrate(f, a, b, tol, maxdepth) {\n  var state = {\n    maxDepthCount: 0,\n    nanEncountered: false\n  };\n  if (tol === undefined) {\n    tol = 1e-8;\n  }\n  if (maxdepth === undefined) {\n    maxdepth = 20;\n  }\n  var fa = f(a);\n  var fm = f(0.5 * (a + b));\n  var fb = f(b);\n  var V0 = (fa + 4 * fm + fb) * (b - a) / 6;\n  var result = adsimp(f, a, b, fa, fm, fb, V0, tol, maxdepth, 1, state);\n\n  /*\n    if (state.maxDepthCount > 0 && console && console.warn) {\n      console.warn('integrate-adaptive-simpson: Warning: maximum recursion depth (' + maxdepth + ') reached ' + state.maxDepthCount + ' times');\n    }\n  \n    if (state.nanEncountered && console && console.warn) {\n      console.warn('integrate-adaptive-simpson: Warning: NaN encountered. Halting early.');\n    }\n  */\n\n  return result;\n}","map":{"version":3,"names":["adsimp","f","a","b","fa","fm","fb","V0","tol","maxdepth","depth","state","nanEncountered","NaN","h","f1","f2","sl","sr","s2","m","V1","V2","err","isNaN","maxDepthCount","Math","abs","integrate","undefined","result"],"sources":["/home/josh/Documents/projects/subs/vue_subs/node_modules/d3-geo-projection/src/integrate.js"],"sourcesContent":["// https://github.com/scijs/integrate-adaptive-simpson\n\n// This algorithm adapted from pseudocode in:\n// http://www.math.utk.edu/~ccollins/refs/Handouts/rich.pdf\nfunction adsimp (f, a, b, fa, fm, fb, V0, tol, maxdepth, depth, state) {\n  if (state.nanEncountered) {\n    return NaN;\n  }\n\n  var h, f1, f2, sl, sr, s2, m, V1, V2, err;\n\n  h = b - a;\n  f1 = f(a + h * 0.25);\n  f2 = f(b - h * 0.25);\n\n  // Simple check for NaN:\n  if (isNaN(f1)) {\n    state.nanEncountered = true;\n    return;\n  }\n\n  // Simple check for NaN:\n  if (isNaN(f2)) {\n    state.nanEncountered = true;\n    return;\n  }\n\n  sl = h * (fa + 4 * f1 + fm) / 12;\n  sr = h * (fm + 4 * f2 + fb) / 12;\n  s2 = sl + sr;\n  err = (s2 - V0) / 15;\n\n  if (depth > maxdepth) {\n    state.maxDepthCount++;\n    return s2 + err;\n  } else if (Math.abs(err) < tol) {\n    return s2 + err;\n  } else {\n    m = a + h * 0.5;\n\n    V1 = adsimp(f, a, m, fa, f1, fm, sl, tol * 0.5, maxdepth, depth + 1, state);\n\n    if (isNaN(V1)) {\n      state.nanEncountered = true;\n      return NaN;\n    }\n\n    V2 = adsimp(f, m, b, fm, f2, fb, sr, tol * 0.5, maxdepth, depth + 1, state);\n\n    if (isNaN(V2)) {\n      state.nanEncountered = true;\n      return NaN;\n    }\n\n    return V1 + V2;\n  }\n}\n\nexport function integrate (f, a, b, tol, maxdepth) {\n  var state = {\n    maxDepthCount: 0,\n    nanEncountered: false\n  };\n\n  if (tol === undefined) {\n    tol = 1e-8;\n  }\n  if (maxdepth === undefined) {\n    maxdepth = 20;\n  }\n\n  var fa = f(a);\n  var fm = f(0.5 * (a + b));\n  var fb = f(b);\n\n  var V0 = (fa + 4 * fm + fb) * (b - a) / 6;\n\n  var result = adsimp(f, a, b, fa, fm, fb, V0, tol, maxdepth, 1, state);\n\n/*\n  if (state.maxDepthCount > 0 && console && console.warn) {\n    console.warn('integrate-adaptive-simpson: Warning: maximum recursion depth (' + maxdepth + ') reached ' + state.maxDepthCount + ' times');\n  }\n\n  if (state.nanEncountered && console && console.warn) {\n    console.warn('integrate-adaptive-simpson: Warning: NaN encountered. Halting early.');\n  }\n*/\n\n  return result;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}